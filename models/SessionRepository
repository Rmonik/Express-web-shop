const BaseRepository = require("../core/BaseRepository");
const {generateRandomHash} = require("../util/hashing");

class SessionRepository extends BaseRepository {

    static createSession(userId) {
        const sessionId = generateRandomHash();
        console.log(userId, sessionId);
        return new Promise((resolve, reject) => {
            this.query("insert into sessions (session, user) values (?, ?)",
                [sessionId, userId])
                .then(data => resolve(sessionId))
                .catch(err => {
                    reject("Could not create session: ", err);
                });
        });
    }

    static getUserFromSessionId(sessionId) {
        return;
    }
}

module.exports = SessionRepository;